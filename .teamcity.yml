name: Demo Js
jobs:
  Job1:
    name: Job 1
    steps:
      - type: script
        script-content: >-
          export SONAR_SCANNER_VERSION="5.0.1.3006"

          mkdir $HOME/.sonar

          curl -sSLo $HOME/.sonar/sonar-scanner.zip
          https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-$SONAR_SCANNER_VERSION-linux.zip 

          unzip -o $HOME/.sonar/sonar-scanner.zip -d $HOME/.sonar/

          export
          PATH=$HOME/.sonar/sonar-scanner-$SONAR_SCANNER_VERSION-linux/bin:$PATH

          sonar-scanner -Dsonar.host.url=%SONAR_HOST_URL%
          -Dsonar.token=%SONAR_TOKEN%
          -Dsonar.projectKey=demo-js-teamcity-pipelines -X
    runs-on: Ubuntu-22.04-Small
    checkout-working-directories-only: false
secrets:
  SONAR_HOST_URL: credentialsJSON:b1e8a4d5-4931-4e43-a551-ad6af09a0b8f
  SONAR_TOKEN: credentialsJSON:95f6c2d7-1276-498d-a440-ca65e235b68c
